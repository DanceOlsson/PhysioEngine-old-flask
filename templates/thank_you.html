{% extends 'base.html' %} <!-- Inherit from base.html -->

{% block title %}Thank You{% endblock %} <!-- Set the page title -->

{% block head %}
    {{ super() }}
    <!-- Additional CSS specific to the Thank You page -->
    <style>
        /* Quote Banner Styling */
        .quote-banner {
            margin-top: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #f0f8ff, #e6f7ff); /* Subtle gradient */
            border-left: 5px solid #4682b4; /* Steel Blue */
            font-style: italic;
            font-size: 1.2rem;
            color: #333;
            position: relative;
            overflow: hidden;
            border-radius: 8px; /* Rounded corners */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Slight shadow */
            animation: fadeIn 2s ease-in-out;
        }

        .quote-banner::before {
            content: open-quote;
            font-size: 3rem;
            color: #4682b4;
            position: absolute;
            top: -10px;
            left: 10px;
        }

        .quote-banner::after {
            content: close-quote;
            font-size: 3rem;
            color: #4682b4;
            position: absolute;
            bottom: -10px;
            right: 10px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Fireworks Canvas Styling */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Allows clicks through the canvas */
            z-index: 500; /* Ensure it stays on top but below critical content */
        }

        /* Fireworks Canvas Responsive Adjustments */
        @media (max-width: 600px) {
            #confetti-canvas {
                z-index: 300; /* Lower z-index to prevent overlaying important content */
            }

            /* Optionally reduce the size or intensity of fireworks on mobile */
            /* This can be adjusted in the JavaScript configuration */
        }
    </style>
{% endblock %}

{% block content %}
<div class="container text-center">
    <!-- Confetti Canvas -->
    <canvas id="confetti-canvas" aria-hidden="true"></canvas>

    <!-- Main heading -->
    <h1>Thank You!</h1>
    <!-- Message -->
    <p>Your responses have been submitted successfully.</p>

    <!-- Quote Banner -->
    <div class="quote-banner" role="contentinfo" aria-label="Inspirational Quote">
        "What gets measured, gets managed."
    </div>
</div>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <!-- Include Canvas Confetti from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js" defer></script>
    <script defer>
        document.addEventListener('DOMContentLoaded', function() {
            // Function to launch confetti
            function launchConfetti() {
                const duration = 5 * 1000; // 5 seconds
                const animationEnd = Date.now() + duration;
                const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

                function randomInRange(min, max) {
                    return Math.random() * (max - min) + min;
                }

                const interval = setInterval(function() {
                    const timeLeft = animationEnd - Date.now();

                    if (timeLeft <= 0) {
                        return clearInterval(interval);
                    }

                    const particleCount = 50 * (timeLeft / duration);
                    // Since particles fall down, start a bit higher
                    confetti(Object.assign({}, defaults, { 
                        particleCount, 
                        origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } 
                    }));
                    confetti(Object.assign({}, defaults, { 
                        particleCount, 
                        origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } 
                    }));
                }, 250);
            }

            // Launch confetti on page load
            launchConfetti();
        });
    </script>
{% endblock %}
