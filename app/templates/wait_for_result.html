<!-- /templates/wait_for_result.html -->
{% extends 'base.html' %}

{% block title %}Väntar på Patientresultat - PhysioEngine{% endblock %}

{% block head %}
    {{ super() }}
    <!-- Meta Refresh: Uppdaterar sidan var 5:e sekund -->
    <meta http-equiv="refresh" content="5">
{% endblock %}

{% block content %}
<div class="container my-5">
    <h1 class="mb-4 text-center">Väntar på Patientens Inlämning</h1>
    <p class="text-center">Vänligen be patienten skanna QR-koden och fylla i frågeformuläret.</p>
        
    <div class="text-center">
        <!-- Visa QR-kodbilden med cache-busting -->
        <img src="{{ url_for('static', filename='qr_codes/' + session_id + '.png') }}?v={{ session_id }}" alt="QR-kod" class="img-fluid mb-3">
        <p>Skanna denna QR-kod för att komma åt frågeformuläret</p>
    </div>

    <div class="alert alert-info" role="alert">
        <p>Resultaten uppdateras automatiskt. Vänta medan patienten fyller i formuläret...</p>
        <p>Du kan också <a href="{{ url_for('main.wait_for_result', session_id=session_id, evaluation_form=evaluation_form) }}">uppdatera sidan</a> manuellt.</p>
    </div>

    <!-- Länk för att gå tillbaka till fysioterapeutens gränssnitt -->
    <p class="text-center"><a href="{{ url_for('physio.physio') }}">Tillbaka till Dashboard</a></p>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<!-- Valfri JavaScript för ytterligare funktionalitet -->
{% endblock %}
